!function(){function t(t,e,n,o){Object.defineProperty(t,e,{get:n,set:o,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n,o,a,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},s={},c=i.parcelRequired7c6;null==c&&((c=function(t){if(t in r)return r[t].exports;if(t in s){var e=s[t];delete s[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){s[t]=e},i.parcelRequired7c6=c),c.register("iE7OH",function(e,n){"use strict";t(e.exports,"register",function(){return o},function(t){return o=t}),t(e.exports,"resolve",function(){return a},function(t){return a=t});var o,a,i={};o=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)i[e[n]]=t[e[n]]},a=function(t){var e=i[t];if(null==e)throw Error("Could not resolve bundle with id "+t);return e}}),c.register("aNJCr",function(e,n){t(e.exports,"getBundleURL",function(){return o},function(t){return o=t});"use strict";var o,a={};o=function(t){var e=a[t];return e||(e=function(){try{throw Error()}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return(""+t[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),a[t]=e),e}}),c("iE7OH").register(JSON.parse('{"EVgbq":"index.43113d71.js","3eSEo":"choosed.f713fddf.png","aaLHb":"amazon.40ba9165.png","cL3Jl":"book.89e7d427.png","jr1cR":"book-block.950d06ef.png","kLGUg":"shopinglist.0a295426.js","1CP06":"shopinglist.30134c76.js"}')),c("i8Q71"),c("32ZrB");var l=c("i7mVp"),d=c("4tSb9"),l=c("i7mVp"),d=c("4tSb9"),u=c("dIxxU"),f=c("h6c0i"),g={};g=c("aNJCr").getBundleURL("EVgbq")+c("iE7OH").resolve("3eSEo");var p=document.querySelector(".container-books");function m(){return v.apply(this,arguments)}function v(){return(v=(0,l._)(function(){var t;return(0,d.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,u.default).get("https://books-backend.p.goit.global/books/top-books ")];case 1:var o,a;return t=n.sent(),p.insertAdjacentHTML("beforeend",(o=t.data,a="",o.forEach(function(t){var n=t.list_name,o=t.books.map(function(t){return k().includes(t._id)?t.choosed=1:t.choosed=0,t}).map(function(t){var n=t.book_image,o=t.author,a=t.title,i=t._id,r=t.choosed;return'<li class="bs-list-item" hidden>\n        <div class="book-card" data-id="'.concat(i,'">\n        <img class="choosed-icon js-ct ').concat(S(r),'" src="').concat(e(g),'" alt="icon" width="25" >\n        <div class="image-overlay">\n            <img class="book-img js-ct" src="').concat(n,'" alt="').concat(a,'" loading="lazy" />\n            <div class="image-description">\n      <p class="image-overlay-description js-ct">quick view</p>\n     </div>\n      </div>\n            <h3 class="book-title js-ct">').concat(a,'</h3>\n            <h4 class="book-author js-ct">').concat(o,"</h4>\n        </div>\n        </li>")}).join("");a+='<div class="category-block">\n        <h2 class="cat-title">'.concat(t.list_name,'</h2>\n        <ul class="book-list">').concat(o,'</ul>\n        <button type="button" class="btn-more" data-catname="').concat(n,'">SEE MORE</button>\n    </div>')}),a='<h1 class="main-title">Best Sellers <span>Books</span></h1>'+a)),[3,3];case 2:return n.sent(),(0,f.Notify).warning("Sorry, failed to load information"),[3,3];case 3:return[2]}})})).apply(this,arguments)}p.firstChild||m();var f=c("h6c0i"),b=document.querySelector(".category-list"),u=c("dIxxU"),h=u.default;function k(){return JSON.parse(localStorage.getItem("savedBooks")).map(function(t){return t._id})}function y(){return(y=(0,l._)(function(){return(0,d.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,h.get("https://books-backend.p.goit.global/books/category-list")];case 1:var e;return e='<li class = "category-list-item"> All Categories </li>'+(e=t.sent().data.map(function(t){var e=t.list_name;return'<li class = "category-list-item"> '.concat(e," </li>")}).join("")),b.innerHTML=e,[3,3];case 2:return t.sent(),(0,f.Notify).warning("Sorry, failed to load information"),[3,3];case 3:return[2]}})})).apply(this,arguments)}function _(t){return L.apply(this,arguments)}function L(){return(L=(0,l._)(function(t){return(0,d.__generator)(this,function(n){switch(n.label){case 0:return[4,h.get("https://books-backend.p.goit.global/books/category?category=".concat(t)).then(function(t){var n,o,a,i,r,s,c;return o=(n=t.data).map(function(t){return k().includes(t._id)?t.choosed=1:t.choosed=0,t}),a='\n    <h2 class ="main-title">'.concat(n[0].list_name,'</h2>\n    <ul class="book-list">').concat(o.map(function(t){var n=t.author,o=t.book_image,a=t.title,i=t._id,r=t.choosed;return'<li class="bs-list-item">\n          <div class="book-card " data-id="'.concat(i,'">\n          <img class="choosed-icon js-ct ').concat(S(r),'" src="').concat(e(g),'" alt="icon" width="25" >\n    <div class="image-overlay">\n    <img class="book-img js-ct" src="').concat(o,'" alt="').concat(a,' loading="lazy" >\n    <div class="image-description">\n      <p class="image-overlay-description js-ct"> quick view  </p>\n     </div>\n      </div>\n    <h3 class="book-title js-ct">').concat(a,'</h3>\n    <p class="book-author js-ct"> ').concat(n,"</p>\n    </div>\n    </li>")}).join(""),"\n    </ul>\n     "),p.innerHTML=a,c=(s=(r=(i=document.querySelector(".main-title")).textContent).split(" "))[s.length-1],void(i.innerHTML=r.replace(c,'<span class="brendcolor">'.concat(c,"</span>")))})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function S(t){return t?"":"visually-hidden"}document.querySelector(".container-books").addEventListener("click",function(t){var e=t.target.dataset.catname,n=Array.from(b.querySelectorAll("li")),o=n.find(function(t){return t.innerText===e}),a=n.find(function(t){return"all categories"===t.innerText.toLowerCase()});o&&(a.classList.remove("categories__title-active"),o.classList.add("categories__title-active"))}),b.addEventListener("click",function(t){var e=t.target,n=document.querySelector(".categories__title-active");if("LI"===e.tagName){if(n&&n.classList.remove("categories__title-active"),t.target.classList.add("categories__title-active"),"All Categories"===e.textContent.trim())return p.innerHTML="",m();_(e.textContent.trim())}}),function(){y.apply(this,arguments)}(),c("xpKCW");var l=c("i7mVp"),d=c("4tSb9"),E={};E=c("aNJCr").getBundleURL("EVgbq")+c("iE7OH").resolve("aaLHb");var w={};w=c("aNJCr").getBundleURL("EVgbq")+c("iE7OH").resolve("cL3Jl");var H={};H=c("aNJCr").getBundleURL("EVgbq")+c("iE7OH").resolve("jr1cR");var f=c("h6c0i"),j=document.querySelector(".backdrop"),N=document.querySelector(".modal"),x=document.querySelector(".modal-shopping-close"),O=document.querySelector(".render-modal"),q=document.querySelector(".scroll-btn");function T(){k().includes(a)?o.children[0].classList.remove("visually-hidden"):o.children[0].classList.add("visually-hidden")}function B(){j.classList.remove("active"),N.classList.remove("active"),q.classList.remove("visually-hidden"),document.body.style.overflow="auto",T()}function R(t){return A.apply(this,arguments)}function A(){return(A=(0,l._)(function(t){var e,n;return(0,d.__generator)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),e="https://books-backend.p.goit.global/books/".concat(t),[4,fetch(e)];case 1:if(!(n=o.sent()).ok)throw Error("Error: ".concat(n.status," ").concat(n.statusText));return[4,n.json()];case 2:return[2,[o.sent()]];case 3:return o.sent(),(0,f.Notify).warning("Sorry, failed to load information"),[3,4];case 4:return[2]}})})).apply(this,arguments)}var C=function(){var t=document.querySelector(".darkFilterModal");"dark"===localStorage.getItem("theme")?t.classList.add("filter-img"):t.classList.remove("filter-img")};function J(t){return I.apply(this,arguments)}function I(){return(I=(0,l._)(function(t){var o;return(0,d.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),q.classList.add("visually-hidden"),O.innerHTML="",[4,R(t)];case 1:var i;return n=(o=a.sent())[0]._id,i=o.map(function(t){return'\n        <div class="card-modal" id="'.concat(t._id,'">\n        <img\n          class="modal-img"\n          alt="').concat(t.title,'"\n          src="').concat(t.book_image,'"\n        />\n  \n        <div class="thumb-modal">\n          <h2 class="book-title-in-modal">').concat(t.title,'</h2>\n          <p class="subtitle-book">').concat(t.author,'</p>\n          <p class="text book">\n          ').concat(t.description?t.description:"Sorry, but this book does not have an accessible description. Try reading it on the website of one of the shops",'\n          </p>\n          <ul class="shop-list">\n            <li>\n              <a href="').concat(t.buy_links[0].url,'" target="_blank">\n                <img src="').concat(e(E),'" alt="Amazon" class="darkFilterModal"/>\n              </a>\n            </li>\n            <li>\n              <a href="').concat(t.buy_links[1].url,'" target="_blank">\n                <img src="').concat(e(w),'" alt="Apple Books" />\n              </a>\n            </li>\n            <li>\n              <a href="').concat(t.buy_links[4].url,'" target="_blank">\n                <img src="').concat(e(H),'" alt="Bookshop" />\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n        ')}).join(""),O.insertAdjacentHTML("beforeend",i),C(),function(t){if(JSON.parse(localStorage.getItem("savedBooks")).some(function(e){return e._id===t})){O.insertAdjacentHTML("beforeend",'\n      <button type="submit" class="button book" aria-label="Remove from shopping">\n        Remove from the shopping list\n      </button>\n      <p class="congratulation">\n        Сongratulations! You have added the book to the shopping list. To delete,\n        press the button “Remove from the shopping list”.\n      </p>\n    ');var e=document.querySelector(".button.book");JSON.parse(localStorage.getItem("userLogin"))||(e.disabled=!0,e.textContent="Login please"),e.addEventListener("click",F)}else{O.insertAdjacentHTML("beforeend",'\n      <button type="submit" class="button book" aria-label="Add to shopping">\n        Add to shopping list\n      </button>\n    ');var n=document.querySelector(".button.book");JSON.parse(localStorage.getItem("userLogin"))||(n.disabled=!0,n.textContent="Login please"),n.addEventListener("click",U)}}(n),[3,3];case 2:return a.sent(),(0,f.Notify).warning("Sorry, failed to load information"),[3,3];case 3:return[2]}})})).apply(this,arguments)}function M(){return(M=(0,l._)(function(t){var e,n,o,a,i,r,s;return(0,d.__generator)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,R(t)];case 1:return n=(e=c.sent()[0])._id,o=e.book_image,a=e.title,i=e.list_name,r={_id:n,book_image:o,title:a,list_name:i,description:e.description,author:e.author,buy_links:e.buy_links},(s=JSON.parse(localStorage.getItem("savedBooks"))||[]).push(r),localStorage.setItem("savedBooks",JSON.stringify(s)),T(),[3,3];case 2:return c.sent(),(0,f.Notify).warning("Sorry, failed to load information"),[3,3];case 3:return[2]}})})).apply(this,arguments)}function U(t){!function(t){M.apply(this,arguments)}(n),B(),V()}function F(t){var e,o,a;e=n,-1!==(a=(o=JSON.parse(localStorage.getItem("savedBooks"))).findIndex(function(t){return t._id===e}))&&o.splice(a,1),localStorage.setItem("savedBooks",JSON.stringify(o)),B(),V()}function V(){var t=document.querySelector(".button.book");t.removeEventListener("click",F),t.removeEventListener("click",U)}function z(t){t.target===j&&(B(),$())}function D(t){B(),$()}function P(t){"Escape"===t.key&&(B(),$())}function $(){j.removeEventListener("click",z),document.removeEventListener("keydown",P),x.removeEventListener("click",D)}function G(t){"BUTTON"===t.target.tagName&&_(t.target.dataset.catname),t.target.classList.value.includes("js-ct")&&(a=(o=t.target.closest(".book-card")).dataset.id),a&&(J(a),j.classList.add("active"),N.classList.add("active"),document.body.style.overflow="hidden",j.addEventListener("click",z),document.addEventListener("keydown",P),x.addEventListener("click",D))}JSON.parse(localStorage.getItem("savedBooks"))||localStorage.setItem("savedBooks",JSON.stringify([])),window.addEventListener("load",function(){p.addEventListener("click",function(t){"BUTTON"===t.target.tagName&&_(t.target.dataset.catname),t.target.classList.value.includes("js-ct")&&(a=(o=t.target.closest(".book-card")).dataset.id),a&&(J(a),j.classList.add("active"),N.classList.add("active"),document.body.style.overflow="hidden",j.addEventListener("click",function(t){t.target===j&&B()}),document.addEventListener("keydown",function(t){"Escape"===t.key&&B()}),x.addEventListener("click",function(t){B()}))}),p.addEventListener("click",G)}),c("kvC6y"),c("8VrgS")}();
//# sourceMappingURL=index.43113d71.js.map
